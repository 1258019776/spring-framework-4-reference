4.3 WEB 改进
==========

* 在原有支持处理资源`ResourceHttpRequestHandler`的基础上,又拓展了新的抽象注释`ResourceResolver`,`ResourceTransformer`,`ResourceUrlProvider`。
一些内置的实现提供了版本控制资源的URL（有效的HTTP缓存），定位gzip压缩的资源，产生HTML5 AppCache清单，以及更多的支持。参见[第17.16.7，“服务资源”](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-config-static-resources)。
* JDK1.8的java.util.Optional包现在支持`@RequestParam`，`@RequestHeader`和`@MatrixVariable`控制器方法的参数。
* `ListenableFuture`支持作为返回值替代调用`DeferredResult`所在的底层服务（或者`AsyncRestTemplate`）并且返回`ListenableFuture`
* @ModelAttribute 现在是按照相互依赖关系来顺序调用。参见[SPR-6299](https://jira.spring.io/browse/SPR-6299)
* Jackson的`@JsonView`被直接支撑在`@ResponseBody`和`ResponseEntity`控制器方法用于序列化相同的POJO（如摘要与内容页）产生不同数量的内容。它同时也支持在特定键值下添加一系列视图类型作为模型属性来完成渲染。参见[the section called “Jackson Serialization View Support”](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-jsonview)查看详细。
* JSONP 现在支持Jackson。 参见[ the section called “Jackson JSONP Support](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-jsonp)
* 新增(请求响应)生命管理选项,用来拦截定义了`ResponseBody`和`ResponseEntity`的方法中返回之后与输出之前之间。利用实现了`ResponseBodyAdvice`接口的注解`@ControllerAdvice`(来完成拦截)。内置的
`@JsonView`与JSONP也是利用了这点。参见[第17.4.1，“使用HandlerIntercepteor来拦截请求”](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-handlermapping-interceptor)。
* 新增三个`HttpMessageConverter`选项
 - Gson ——比Jackson更轻量;已经在Android Spring上应用了。
 - Google Protocol Buffers ——高效且有效的在企业内部作为一个服务间的通信数据协议的同时也可以在浏览器已JSON和XML形式暴露出来。
 - Jackson——基于based XML的同时，现在也支持[jackson-dataformat-xml](https://github.com/FasterXML/jackson-dataformat-xml)扩展。当使用`@EnableWebMvc`或则`<mvc:annotation-driven/>`时，如果`jackson-dataformat-xml`有在环境变量中,那么原先默认的JAXB2方式将被替代。
* 诸如JSP等视图现在可以通过控制器映射的名字来关联控制器了。默认的名字是每一个指定的`@RequestMapping`。例如`FooController`有一个方法叫`handleFoo`，那么映射名字就是**"FC#handleFoo"**。命名策略是可拔插的。意味着可能通过`@RequestMapping`的属性名来明确定义。全新的spring jsp 标签库函数`mvcUrl`会让你使用起来更加容易。参见[第17.7.2，“从视图处构建控制器与方法的URIs”](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-links-to-controllers-from-views)。
* `ResponseEntity`提供一种建造者风格的API来引导控制器的方法指向事先准备好的服务端相应，例如`ResponseEntity.ok()`。
* `RequestEntity`是一种全新的方式，用来提供一种建造者风格的API来引导客户端的REST代码指向事先准备好的HTTP requests。
* MVC Java 配置和XML命名空间
  - 视图解析器现在可以被配置成支持内容协商。
  - 视图控制器现在已经内置了支持重定向和设置相应状态。应用程序使用它来配置重定向URLs,渲染一个404相应视图，发送一个"no content"的相应,等等。例如，一些例子[清单](https://jira.spring.io/browse/SPR-11543?focusedCommentId=100308&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-100308)
  - 路径自定义匹配将被常用到，并且已内置。参见[第17.16.9，“路径匹配”](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-config-path-matching)。
* [Groovy markup template](http://groovy-lang.org/docs/groovy-2.3.6/html/documentation/markup-template-engine.html)的支持(基于Groovy 2.3)。参见`GroovyMarkupConfigurer`和给自`ViewResolver`及其'视图'实现。
